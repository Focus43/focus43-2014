!function(e,t){"use strict";t.module("redeaux",["ngRoute","ngResource","ngAnimate","GoogleMap","redeaux.common","redeaux.pages"]).config(["$provide","$routeProvider","$locationProvider","$httpProvider","GoogleMapsAPIProvider",function(t,n,o,r,a){r.defaults.headers.common["x-angularized"]=!0,o.html5Mode(!0).hashPrefix("!"),n.when("/:page*?",{resolve:{precompiled:["$templateCache","$location","$q",function(t,n,o){if(0===t.info().size){var r=o.defer();return t.put(n.path()+"?xcache=1",e.PRE_COMPILED_VIEW),r.resolve(),r.promise}}]},templateUrl:function(e){return"/"+(e.page||"")+"?xcache=1"}});var i=document.querySelector("head");t.value("ApplicationPaths",{images:i.getAttribute("data-image-path"),tools:i.getAttribute("data-tools-path")}),t.value("Breakpoints",{xs:480,sm:768,md:992,lg:1200}),a.setup({api_key:i.getAttribute("data-gmap-api"),sensor:!0,weather:!1})}]).run(["$window","$rootScope",function(e,n){t.isDefined(e.FastClick)&&FastClick.attach(document.body),n.bodyClasses={"fixed-max":!1}}]),t.element(document).ready(function(){t.element(document.documentElement).hasClass("cms-admin")&&t.element(document.querySelectorAll("a")).each(function(e,t){t.setAttribute("target","_self")});var n=document.querySelector("main.page-body");for(e.PRE_COMPILED_VIEW=n.innerHTML;n.firstChild;)n.removeChild(n.firstChild);t.bootstrap(document,["redeaux"])})}(window,window.angular),angular.module("redeaux.common",[]),angular.module("GoogleMap",[]),angular.module("redeaux.pages",[]),angular.module("redeaux.common").controller("CtrlRoot",["$rootScope","$scope","$location",function(e,t,n){e.$on("$routeChangeSuccess",function(){t.absUrl=n.absUrl()});var o=["trnztn-1","trnztn-2","trnztn-3","trnztn-4","trnztn-5"];e.$on("$viewContentLoaded",function(){t.transitionClass=o[Math.floor(Math.random()*o.length)]})}]),angular.module("redeaux.common").factory("NavState",[function(){return{open:!1,working:!1}}]).directive("nav",[function(){function e(e,t){var n=angular.element(t[0].querySelector(".trigger")),o=angular.element(document.querySelector("#level-2"));n.on("click",function(){e.$apply(function(){e.navState.open=!e.navState.open})}),e.$watch("navState.open",function(t){t===!0&&o.one("click",function(){e.$apply(function(){e.navState.open=!1})})})}return{restrict:"E",link:e,scope:!0,controller:["$rootScope","$scope","NavState",function(e,t,n){t.navState=n,this.toggleSidebar=function(){t.$apply(function(){t.navState.open=!t.navState.open})},this.toggleWorking=function(){t.$apply(function(){t.navState.working=!t.navState.working})},e.$on("$routeChangeStart",function(){t.navState.open=!1})}]}}]),angular.module("redeaux.common").factory("Preloader",["$rootScope","$q",function(e,t){function n(t){e.$applyAsync(function(){e.bodyClasses.loading=angular.isDefined(t)?t:!e.bodyClasses.loading})}function o(){n(!1)}function r(){n(!1)}function a(){e.preload.completed++,e.preload.progress=Math.round(e.preload.completed/e.preload.collection.length*100)}function i(){e.preload.progress=0,e.preload.completed=0,e.preload.collection=[],e.preload.deferred=t.defer(),e.preload.deferred._id=l++,e.preload.deferred.promise.then(o,r,a)}var l=0;return e.preload={},i(),e.$on("$routeChangeStart",i),e.$watchCollection("preload.collection",function(o){angular.isArray(o)&&o.length&&(n(!0),t.all(o).then(function(){e.preload.deferred.resolve()}))}),{toggleLoading:n,pushToCollection:function(t){e.preload.collection.push(t)},queue:function(t){t.apply(e,[e.preload.deferred])},promise:function(){return e.preload.deferred.promise}}}]).directive("preload",["$q","Preloader",function(e,t){function n(n,o,r){t.queue(function(n){var a=e.defer(),i=o[0].tagName.toLowerCase();if("video"===i)o.on("canplaythrough",function(){n.notify(),a.resolve()});else{var l=new Image;l.onload=function(){"img"===i?o.attr("src",r.preload):o.css("backgroundImage","url("+r.preload+")"),n.notify(),a.resolve()},l.src=r.preload}angular.isDefined(r.blocking)&&t.pushToCollection(a.promise)})}return{restrict:"A",link:n,scope:!1}}]),angular.module("redeaux.common").provider("Modernizr",function(){this.$get=["$window","$log",function(e,t){return e.Modernizr||(t.warn("Modernizr unavailable!"),!1)}]}).provider("Timeline",function(){this.$get=["$window","$log",function(e,t){return e.TimelineMax||e.TimelineLite||(t.warn("GS TimeLine Library unavailable!"),!1)}]}).provider("Tween",function(){this.$get=["$window","$log",function(e,t){return e.TweenMax||e.TweenLite||(t.warn("GS Tween Library unavailable!"),!1)}]}),angular.module("redeaux.common").factory("TimelineHelper",["Timeline",function(e){return{randomInt:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},suicidal:function(t,n){return new e(angular.extend(t,{onComplete:function(){if(this.kill(),angular.isArray(n))for(var e=0;e<=n.length;e++)angular.isObject(n[e])&&n[e].resolve&&n[e].resolve(),angular.isFunction(n[e])&&n[e]()}}))}}}]).factory("Utilities",["$q","$timeout",function(e,t){function n(e,t,n){var o=angular.isObject(e)?e:document.styleSheets[e],r=o.cssRules,a=!1;for(var i in r)if(r[i].selectorText&&t.test(r[i].selectorText)){a=r[i].style[n];break}return a}function o(){var n=e.defer();return t(function(){document.body.scrollHeight>document.body.clientHeight&&n.resolve(document.body),n.resolve(document.documentElement)},100),n.promise}return{parseRule:n,determineBodyScrollElement:o}}]),angular.module("GoogleMap").directive("googlemap",[function(){function e(e){return{zoom:15,mapTypeId:e.MapTypeId.ROADMAP}}function t(t,n,o){t.$watch("_status.ready",function(r){if(r){if(t.mapInstance=new t.mapAPI.Map(n[0],angular.extend(e(t.mapAPI),t.mapOptions||{})),angular.isDefined(o.weather)){var a=new t.mapAPI.weather.WeatherLayer({temperatureUnits:t.mapAPI.weather.TemperatureUnit.FAHRENHEIT});a.setMap(t.mapInstance)}if(angular.isDefined(o.clouds)){var i=new t.mapAPI.weather.CloudLayer;i.setMap(t.mapInstance)}}})}return{restrict:"A",link:t,scope:{mapOptions:"=googlemap",mapInstance:"=?"},controller:["$scope","$q","GoogleMapsAPI",function(e,t,n){e._status={ready:!1};var o=t.defer();e.$watch("mapOptions",function(e){angular.isObject(e)&&o.resolve(e)}),t.all([n.promise,o.promise]).then(function(t){e.mapAPI=t[0],e._status.ready=!0})}]}}]),angular.module("GoogleMap").provider("GoogleMapsAPI",function(){function e(e){var t="https://maps.googleapis.com/maps/api/js?";return t+="key="+e.api_key,t+="&sensor="+(e.sensor?"TRUE":"FALSE"),t+=e.weather?"&libraries=weather":"",t+="&callback="+e.callback}var t={callback:"google_map_loaded",api_key:"API_KEY",sensor:!0,weather:!1};this.setup=function(e){angular.extend(t,e)},this.$get=["$window","$q",function(n,o){angular.element(n).data("mapDeferred",o.defer()),n[t.callback]=function(){angular.element(n).data("mapDeferred").resolve(n.google.maps)};var r=document.createElement("script");return r.type="text/javascript",r.src=e(t),document.body.appendChild(r),{promise:angular.element(n).data("mapDeferred").promise,available:function(e){this.promise.then(e)}}}]}),angular.module("redeaux.pages").directive("tplAbout",["$document","Breakpoints",function(e,t){function n(e){function n(){e.$apply(function(){e.gramCount=window.innerWidth<=t.lg?9:16})}angular.element(window).on("resize",n),e.$on("$destroy",function(){angular.element(window).off("resize",n)})}return{restrict:"A",link:n,scope:!0,controller:["$scope","$http","ApplicationPaths","Breakpoints",function(e,t,n,o){e.gramCount=window.innerWidth<=o.lg?9:16,t.get(n.tools+"instagram/json").then(function(t){t.status>=200&&t.status<=300&&(e.instagramList=t.data)})}]}}]),angular.module("redeaux.pages").directive("tplContact",["$document","$animate",function(e,t){function n(e,n){n[0].querySelector("video").play(),e.$watch("response",function(e){angular.isObject(e)&&e.ok===!0&&t.addClass(n[0].querySelector(".form-body"),"form-sent")})}return{restrict:"A",link:n,scope:!0,controller:["$scope","$http","GoogleMapsAPI","ApplicationPaths",function(e,t,n,o){e.processing=!1,e._gmap=null,e.isValid=function(){return e.contactForm.$invalid},e.submit=function(){e.processing=!0,t.post(o.tools+"contact",e.form_data).success(function(t){e.processing=!1,e.response=t})},e.$watch("_gmap",function(e){angular.isObject(e)&&null!==e&&n.available(function(t){var n=new t.Marker({position:new t.LatLng(43.478589,-110.760121),map:e,title:"Focus43",icon:o.images+"logo_marker.png"}),r=new t.InfoWindow({content:'<div class="map-info-window"><h1>Focus43 World Headquarters</h1><p>(Otherwise known as... our only headquarters.)</p><h3>Swing by and have a beer with us.</h3></div>',maxWidth:400});r.open(e,n),e.panBy(0,-150)})}),n.available(function(t){e.mapOptions={center:new t.LatLng(43.479634,-110.760234),zoom:15,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#7dcdcd"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]}],disableDefaultUI:!0,scrollwheel:!1}})}]}}]).animation(".form-sent",["TimelineHelper",function(e){return{addClass:function(t,n,o){var r=t[0].querySelectorAll(".row");e.suicidal(o).set(t,{overflow:"hidden"}).staggerTo(r,.25,{y:-500,opacity:0,scale:.8,ease:Power2.easeOut},.15).to(t,.35,{height:0,ease:Power2.easeOut})}}}]),angular.module("redeaux.pages").directive("tplExperiments",[function(){function e(){}return{restrict:"A",link:e}}]),angular.module("redeaux.pages").directive("tplHome",["Parallaxer",function(e){function t(t,n){t._parallax=e.initialize(n[0].querySelector("#parallax"))}return{restrict:"A",link:t,scope:!0,controller:["$scope",function(e){e.$on("$destroy",function(){angular.isObject(e._parallax)&&e._parallax.destroy()})}]}}]).service("Parallaxer",["$window","$document","Tween","Modernizr",function(e,t,n,o){function r(t){function n(){o.winW=e.innerWidth,o.winH=e.innerHeight,o.layerW=o.$sky.clientWidth,o.layerD=o.layerW-o.winW}var o=this;this.element=t,this.$sky=this.element.querySelector(".sky"),this.$mtns=this.element.querySelector(".mtn"),this.$z3=this.element.querySelector(".z3"),this.$z2=this.element.querySelector(".z2"),this.$z1=this.element.querySelector(".z1"),this.winW=e.innerWidth,this.winH=e.innerHeight,this.layerW=this.$sky.clientWidth,this.layerD=this.layerW-this.winW,angular.element(e).on("resize",n),this.destruct=function(){angular.element(e).off("resize",n)}}function a(e){function o(e){a=e.rotationRate.beta}function r(){n.set(e.$mtns,{x:100/a*10})}var a,i=!1;this.run=function(){return i?this:(t.on("mousemove",o),n.ticker.addEventListener("tick",r),i=!0,this)},this.destroy=function(){t.off("mousemove",o),n.ticker.removeEventListener("tick",r),e.destruct(),e=null,i=!1}}function i(e){function o(e){a={x:e.pageX,y:e.pageY}}function r(){if(a!==i){var t=e.percentX(a.x),o=e.percentY(a.y),r=e.halfX(a.x),l=e.moveX(t),s=o+.25;n.set(e.$sky,{x:l/2,scale:1+.1*o,y:25*o}),n.set(e.$mtns,{x:l,scale:1+.1*o,y:-(25*o)}),n.set(e.$z3,{x:125*r,autoAlpha:s,scale:1+.1*o}),n.set(e.$z2,{x:300*r,autoAlpha:s,scale:1+.2*o}),n.set(e.$z1,{x:700*r,autoAlpha:s,scale:1+.3*o}),i=a}}var a,i,l=!1;this.run=function(){return l?this:(t.on("mousemove",o),n.ticker.addEventListener("tick",r),l=!0,this)},this.destroy=function(){t.off("mousemove",o),n.ticker.removeEventListener("tick",r),e.destruct(),e=null,l=!1}}var l=o.touch&&o.devicemotion?!0:!1;r.prototype.percentX=function(e){return e/this.winW},r.prototype.percentY=function(e){return e/this.winH},r.prototype.moveX=function(e){return-(e*this.layerD)},r.prototype.halfX=function(e){return(this.winW/2-e)/this.winW},this.initialize=function(e){var t=new r(e);return l?new a(t).run():new i(t).run()}}]),angular.module("redeaux.pages").directive("tplWork",[function(){function e(){}return{restrict:"A",link:e,controller:["$scope","$route","ApplicationPaths",function(){}]}}]),angular.module("redeaux.pages").directive("portfolioToj",["$document","$rootScope","Timeline","Tween",function(e,t,n,o){function r(t,r){function a(){return p.scrollHeight}function i(){return p.scrollTop}function l(e){var t,n=e,o=n.detail,r=n.wheelDelta,a=225,i=a-1;o=o?r&&(t=r/o)?o/t:-o/1.35:r/120,o=1>o?-1>o?(-Math.pow(o,2)-i)/a:o:(Math.pow(o,2)+i)/a,e.delta=Math.min(Math.max(o/2,-1),1)}function s(e){e.preventDefault(),l(e),o.to(p,g,{scrollTo:{y:i()-parseInt(e.delta*h),autoKill:!0},ease:Power2.easeOut,overwrite:5})}function u(){m=i()/(f-document.body.clientHeight),y.progress(m),o.to(v,.5,{width:Math.round(100*y.progress())+"%",overwrite:5})}function c(e){var t=new n({paused:!0,useFrames:!1,smoothChildTiming:!0}),r=e.querySelector(".intro"),a=e.querySelector(".screens"),i=a.querySelectorAll("img"),l=a.querySelectorAll("span"),s=e.querySelector(".about"),u=e.querySelector(".video");return t._playByScroll=function(e,t){var n=this._labels[e]/this.totalDuration();o.to(p,t||2,{scrollTo:{y:(f-p.clientHeight)*n,autoKill:!0},ease:Power2.easeOut,overwrite:5})},t.addLabel("intro").to(r,3,{backgroundPositionY:"100%",backgroundPositionX:"100%"}).to(r.querySelector("small"),2,{top:500,autoAlpha:0,ease:Power2.easeIn},"-=2.5").to(r.querySelector("h1"),2,{y:"-200%",autoAlpha:0,ease:Power2.easeOut},"-=2").to(r,2,{top:"-50%"},"-=1.5").to([r.querySelector(".textual"),a],2,{top:"50%"},"-=2").fromTo(r.querySelector("h3"),1,{y:300},{y:0}).addLabel("textual").staggerTo(r.querySelectorAll("h2, h3"),1,{y:300,autoAlpha:0},.5).to([r,a],1,{y:"-50%"},"-=1").to(i[0],1,{x:"-80%"}).to(i[1],1,{y:"-56%"},"-=1").to(i[2],1,{x:"-20%",y:"-53%"},"-=1").to(l[0],1,{x:"-30%",y:-20},"-=1").to(l[2],1,{x:"30%",y:-20},"-=1").fromTo(a.querySelector(".phonerize"),.5,{scale:.8},{scale:1,rotationY:30},"-=1").addLabel("screens").staggerTo(i,1.5,{left:0,autoAlpha:0},.5).staggerTo(l,1.5,{y:200,autoAlpha:0},.5,"-=2.5").to(a.querySelector(".bg"),4,{autoAlpha:1},"-=3").to(s,1,{y:"-100%"},"-=2").addLabel("about").to(u,1,{y:"-100%"}).addLabel("video")}function d(){e.off("mousewheel DOMMouseScroll",s),o.ticker.removeEventListener("tick",u),p=t._scrollTarget,m=0,f=a(),g=.65,h=325,y=window.tl=c(r[0]),v=r[0].querySelector(".timeline-progress > .value"),w=angular.element(r[0].querySelectorAll(".timeline-progress > .marker")),angular.forEach(w,function(e){e.style.left=Math.round(y.getLabelTime(e.getAttribute("data-label"))/y._totalDuration*100)+"%"}),w.on("click",function(){w.removeClass("active"),angular.element(this).addClass("active");var e=y.getLabelTime(this.getAttribute("data-label"));o.to(p,2,{scrollTo:{y:e/y._totalDuration*(f-p.clientHeight),autoKill:!0},ease:Power2.easeOut,overwrite:5})}),t.autoplay=function(){y._playByScroll("video",12)},e.on("mousewheel DOMMouseScroll",s),o.ticker.addEventListener("tick",u)}var p,m,f,g,h,y,v,w;t.$watch("_scrollTarget",function(e){angular.isElement(e)&&d()}),t.linkTearDown=function(){e.off("mousewheel DOMMouseScroll",s),o.ticker.removeEventListener("tick",u),angular.isObject(y)&&y.kill()}}return{restrict:"A",link:r,scope:!0,controller:["$rootScope","$scope","$q","Preloader","Utilities",function(e,t,n,o,r){e.bodyClasses["fixed-max"]=!0,n.all([r.determineBodyScrollElement(),o.promise()]).then(function(e){t._scrollTarget=e[0]}),t.$on("$destroy",function(){e.bodyClasses["fixed-max"]=!1,t.linkTearDown()})}]}}]);
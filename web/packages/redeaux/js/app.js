!function(e,t){"use strict";t.module("redeaux",["ngRoute","ngResource","ngAnimate","GoogleMap","redeaux.common","redeaux.pages"]).config(["$provide","$routeProvider","$locationProvider","$httpProvider","GoogleMapsAPIProvider",function(t,n,o,a,r){a.defaults.headers.common["x-angularized"]=!0,o.html5Mode(!0).hashPrefix("!"),n.when("/:page*?",{resolve:{precompiled:["$templateCache","$q",function(t,n){if(0===t.info().size){var o=n.defer();return t.put(e.location.pathname,e.precompiled_view),o.resolve(),o.promise}}]},templateUrl:function(e){return"/"+(e.page||"")}}),t.value("ApplicationPaths",{images:document.querySelector('meta[name="app-images"]').getAttribute("content"),tools:document.querySelector('meta[name="app-tools"]').getAttribute("content")}),t.value("Breakpoints",{xs:480,sm:768,md:992,lg:1200}),r.setup({api_key:"AIzaSyANFxVJuAgO4-wqXOeQnIfq38x7xmhMZXY",sensor:!0,weather:!1})}]).run(["$window",function(e){t.isDefined(e.FastClick)&&FastClick.attach(document.body)}]),t.element(document).ready(function(){t.element(document.documentElement).hasClass("cms-admin")&&t.element(document.querySelectorAll("a")).each(function(e,t){t.setAttribute("target","_self")});var n=document.querySelector("section.page-body");for(e.precompiled_view=n.innerHTML;n.firstChild;)n.removeChild(n.firstChild);t.bootstrap(document,["redeaux"])})}(window,window.angular),angular.module("redeaux.common",[]),angular.module("GoogleMap",[]),angular.module("redeaux.pages",[]),angular.module("redeaux.common").controller("CtrlRoot",["$rootScope","$scope","$location",function(e,t,n){e.$on("$routeChangeSuccess",function(){t.absUrl=n.absUrl()});var o=["trnztn-1","trnztn-2","trnztn-3","trnztn-4","trnztn-5"];e.$on("$viewContentLoaded",function(){console.log("-- content loaded --"),t.transitionClass=o[Math.floor(Math.random()*o.length)]})}]),angular.module("redeaux.common").factory("NavState",[function(){return{open:!1,working:!1}}]).directive("nav",[function(){function e(e,t){var n=angular.element(t[0].querySelector(".trigger")),o=angular.element(document.querySelector("#level-2"));n.on("click",function(){e.$apply(function(){e.navState.open=!e.navState.open})}),e.$watch("navState.open",function(t){t===!0&&o.one("click",function(){e.$apply(function(){e.navState.open=!1})})})}return{restrict:"E",link:e,scope:!0,controller:["$rootScope","$scope","NavState",function(e,t,n){t.navState=n,this.toggleSidebar=function(){t.$apply(function(){t.navState.open=!t.navState.open})},this.toggleWorking=function(){t.$apply(function(){t.navState.working=!t.navState.working})},e.$on("$routeChangeStart",function(){t.navState.open=!1})}]}}]),angular.module("redeaux.common").provider("Modernizr",function(){this.$get=["$window","$log",function(e,t){return e.Modernizr||(t.warn("Modernizr unavailable!"),!1)}]}).provider("TimelineLite",function(){this.$get=["$window","$log",function(e,t){return e.TimelineLite||(t.warn("TimelineLite unavailable!"),!1)}]}).provider("TimelineMax",function(){this.$get=["$window","$log",function(e,t){return e.TimelineMax||(t.warn("TimelineMax unavailable!"),!1)}]}).provider("TweenLite",function(){this.$get=["$window","$log",function(e,t){return e.TweenLite||(t.warn("TweenLite unavailable!"),!1)}]}),angular.module("redeaux.common").factory("TimelineHelper",["TimelineLite",function(e){return{randomInt:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},suicidal:function(t,n){return new e({onComplete:function(){this.kill(),angular.isFunction(t)&&t(),angular.isObject(n)&&n.resolve()}})}}}]),angular.module("GoogleMap").directive("googlemap",[function(){function e(e){return{zoom:15,mapTypeId:e.MapTypeId.ROADMAP}}function t(t,n,o){t.$watch("_status.ready",function(a){if(a){if(t.mapInstance=new t.mapAPI.Map(n[0],angular.extend(e(t.mapAPI),t.mapOptions||{})),angular.isDefined(o.weather)){var r=new t.mapAPI.weather.WeatherLayer({temperatureUnits:t.mapAPI.weather.TemperatureUnit.FAHRENHEIT});r.setMap(t.mapInstance)}if(angular.isDefined(o.clouds)){var i=new t.mapAPI.weather.CloudLayer;i.setMap(t.mapInstance)}}})}return{restrict:"A",link:t,scope:{mapOptions:"=googlemap",mapInstance:"=?"},controller:["$scope","$q","GoogleMapsAPI",function(e,t,n){e._status={ready:!1};var o=t.defer();e.$watch("mapOptions",function(e){angular.isObject(e)&&o.resolve(e)}),t.all([n.promise,o.promise]).then(function(t){e.mapAPI=t[0],e._status.ready=!0})}]}}]),angular.module("GoogleMap").provider("GoogleMapsAPI",function(){function e(e){var t="https://maps.googleapis.com/maps/api/js?";return t+="key="+e.api_key,t+="&sensor="+(e.sensor?"TRUE":"FALSE"),t+=e.weather?"&libraries=weather":"",t+="&callback="+e.callback}var t={callback:"google_map_loaded",api_key:"API_KEY",sensor:!0,weather:!1};this.setup=function(e){angular.extend(t,e)},this.$get=["$window","$q",function(n,o){angular.element(n).data("mapDeferred",o.defer()),n[t.callback]=function(){angular.element(n).data("mapDeferred").resolve(n.google.maps)};var a=document.createElement("script");return a.type="text/javascript",a.src=e(t),document.body.appendChild(a),{promise:angular.element(n).data("mapDeferred").promise,available:function(e){this.promise.then(e)}}}]}),angular.module("redeaux.pages").directive("tplAbout",["$document","$animate","TweenLite","ApplicationPaths","Breakpoints",function(e,t,n,o,a){function r(e){return e+"?count="+(window.innerWidth<=a.lg?9:16)}function i(e,n){function o(){e.$apply(function(){e._instagram=r(s)})}t.enter(n[0].parentNode,n[0].parentNode.parentNode).then(function(){e.$apply(function(){e.animClass=l})}),angular.element(window).on("resize",o),e.$on("$destroy",function(){angular.element(window).off("resize",o)})}var l="anim-about",s=o.tools+"instagram/client";return{restrict:"A",link:i,scope:!0,controller:["$scope",function(e){e._instagram=r(s)}]}}]).animation(".anim-about",[function(){return{addClass:function(e,t,n){console.log("about_view_ready"),n()}}}]),angular.module("redeaux.pages").directive("tplContact",["$document","$animate",function(e,t){function n(e,n){t.enter(n[0].parentNode,n[0].parentNode.parentNode).then(function(){e.$apply(function(){e.animClass=o})}),n[0].querySelector("video").play(),e.$watch("response",function(e){angular.isObject(e)&&e.ok===!0&&t.addClass(n[0].querySelector(".form-body"),"form-sent")})}var o="anim-contact";return{restrict:"A",link:n,scope:!0,controller:["$scope","$http","GoogleMapsAPI","ApplicationPaths",function(e,t,n,o){e.processing=!1,e._gmap=null,e.isValid=function(){return e.contactForm.$invalid},e.submit=function(){e.processing=!0,t.post(o.tools+"contact",e.form_data).success(function(t){e.processing=!1,e.response=t})},e.$watch("_gmap",function(e){angular.isObject(e)&&null!==e&&n.available(function(t){var n=new t.Marker({position:new t.LatLng(43.478589,-110.760121),map:e,title:"Focus43",icon:o.images+"logo_marker.png"}),a=new t.InfoWindow({content:'<div class="map-info-window"><h1>Focus43 World Headquarters</h1><p>(Otherwise known as... our only headquarters.)</p><h3>Swing by and have a beer with us.</h3></div>',maxWidth:400});a.open(e,n)})}),n.available(function(t){e.mapOptions={center:new t.LatLng(43.479634,-110.760234),zoom:15,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#7dcdcd"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]}],disableDefaultUI:!0,scrollwheel:!1}})}]}}]).animation(".anim-contact",[function(){return{addClass:function(e,t,n){console.log("contact_view_ready"),n()}}}]).animation(".form-sent",["TimelineHelper",function(e){return{addClass:function(t,n,o){var a=t[0].querySelectorAll(".row");e.suicidal(o).set(t,{overflow:"hidden"}).staggerTo(a,.25,{y:-500,opacity:0,scale:.8,ease:Power2.easeOut},.15).to(t,.35,{height:0,ease:Power2.easeOut})}}}]),angular.module("redeaux.pages").directive("tplExperiments",["TweenLite","$document","$animate",function(e,t,n){function o(e,t){n.enter(t[0].parentNode,t[0].parentNode.parentNode).then(function(){e.$apply(function(){e.animClass=a})})}var a="anim-experiments";return{restrict:"A",link:o}}]),angular.module("redeaux.pages").directive("tplHome",["Parallaxer",function(e){function t(t,n){t._parallax=e.initialize(n[0].querySelector("#parallax"))}return{restrict:"A",link:t,scope:!0,controller:["$scope",function(e){e.$on("$destroy",function(){angular.isObject(e._parallax)&&e._parallax.destroy()})}]}}]).service("Parallaxer",["$window","$document","TweenLite","Modernizr",function(e,t,n,o){function a(t){function n(){o.winW=e.innerWidth,o.winH=e.innerHeight,o.layerW=o.$sky.clientWidth,o.layerD=o.layerW-o.winW}var o=this;this.element=t,this.$sky=this.element.querySelector(".sky"),this.$mtns=this.element.querySelector(".mtn"),this.$z3=this.element.querySelector(".z3"),this.$z2=this.element.querySelector(".z2"),this.$z1=this.element.querySelector(".z1"),this.winW=e.innerWidth,this.winH=e.innerHeight,this.layerW=this.$sky.clientWidth,this.layerD=this.layerW-this.winW,angular.element(e).on("resize",n),this.destruct=function(){angular.element(e).off("resize",n)}}function r(e){function o(e){r=e.rotationRate.beta}function a(){n.set(e.$mtns,{x:100/r*10})}var r,i=!1;this.run=function(){return i?this:(t.on("mousemove",o),n.ticker.addEventListener("tick",a),i=!0,this)},this.destroy=function(){t.off("mousemove",o),n.ticker.removeEventListener("tick",a),e.destruct(),e=null,i=!1}}function i(e){function o(e){r={x:e.pageX,y:e.pageY}}function a(){if(r!==i){var t=e.percentX(r.x),o=e.percentY(r.y),a=e.halfX(r.x),l=e.moveX(t),s=o+.25;n.set(e.$sky,{x:l/2,scale:1+.1*o,y:25*o}),n.set(e.$mtns,{x:l,scale:1+.1*o,y:-(25*o)}),n.set(e.$z3,{x:125*a,autoAlpha:s,scale:1+.1*o}),n.set(e.$z2,{x:300*a,autoAlpha:s,scale:1+.2*o}),n.set(e.$z1,{x:700*a,autoAlpha:s,scale:1+.3*o}),i=r}}var r,i,l=!1;this.run=function(){return l?this:(t.on("mousemove",o),n.ticker.addEventListener("tick",a),l=!0,this)},this.destroy=function(){t.off("mousemove",o),n.ticker.removeEventListener("tick",a),e.destruct(),e=null,l=!1}}var l=o.touch&&o.devicemotion?!0:!1;a.prototype.percentX=function(e){return e/this.winW},a.prototype.percentY=function(e){return e/this.winH},a.prototype.moveX=function(e){return-(e*this.layerD)},a.prototype.halfX=function(e){return(this.winW/2-e)/this.winW},this.initialize=function(e){var t=new a(e);return l?new r(t).run():new i(t).run()}}]),angular.module("redeaux.pages").directive("tplWork",["TweenLite","$document","$animate",function(e,t,n){function o(e,t){n.enter(t[0].parentNode,t[0].parentNode.parentNode).then(function(){e.$apply(function(){e.animClass=a})})}var a="anim-work";return{restrict:"A",link:o}}]).animation(".anim-work",[function(){return{addClass:function(e,t,n){console.log("work_view_ready"),n()}}}]);